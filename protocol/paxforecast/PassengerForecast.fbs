include "paxmon/PassengerGroup.fbs";
include "paxmon/PassengerLocalization.fbs";

namespace motis.paxforecast;

table ForecastAlternative {
  journey: motis.paxmon.CompactJourney;
  probability: float;
}

table PassengerGroupForecast {
  group: motis.paxmon.PassengerGroup;
  localization: motis.paxmon.PassengerLocalization;
  forecast_alternatives: [ForecastAlternative];
}

struct CdfEntry {
  passengers: uint;
  probability: float;
}

table EdgeOverCapacity {
  from: motis.Station;
  to: motis.Station;
  departure_schedule_time: ulong;
  arrival_schedule_time: ulong;
  capacity: uint;
  passenger_cdf: [CdfEntry];
}

table TripOverCapacity {
  trip: motis.TripId;
  edges: [EdgeOverCapacity];
}

table OverCapacityInfo {
  edge_count_over_capacity: ulong;
  trips_over_capacity: [TripOverCapacity];
}

table PassengerForecast {
  groups: [PassengerGroupForecast];
  over_capacity: OverCapacityInfo;
}
